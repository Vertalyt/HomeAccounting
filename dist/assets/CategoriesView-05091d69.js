import{u as R,a as b,b as k,c as U}from"./index.esm-25c10212.js";import{u as B,g as _,f as M,N,_ as V,o as c,c as h,a as t,O as E,U as L,n as y,t as i,v,q as $,p as D,m as q,b as g,E as F,e as K,i as C,k as j,j as T,s as I}from"./index-dc28a2c1.js";import{E as x,a as O}from"./ElementRestor-219304de.js";function P(e,{emit:a}){const{isSubmitting:s,handleSubmit:n}=R(),r=B(),{value:o,errorMessage:d,handleBlur:p}=b("nameCategory",k().trim().required(_("EnterCategoryName"))),{value:l,errorMessage:m,handleBlur:w}=b("limitCategory",U().required(_("EnterLimit")).min(500,`${_("LimitCannotBeLess")} 500.`));l.value=500;const S=n(async(f,{resetForm:z})=>{try{await r.dispatch("categories/create",{title:f.nameCategory,limit:f.limitCategory,isDetected:!1}),z(),l.value=500,a("created")}catch{}});return M(()=>{N.updateTextFields()}),{isSubmitting:s,nValue:o,nError:d,nBlur:p,lValue:l,lError:m,lBlur:w,onSubmit:S,getLocalizedText:_}}const A={name:"CategoryCreate",emits:["created"],setup(e,{emit:a}){return{...P(e,{emit:a})}}},G=e=>(D("data-v-25e68337"),e=e(),q(),e),H={class:"col s12 m12"},J={class:"field"},Q={class:"input-field"},W={for:"nameCategory"},X={class:"input-field"},Y={for:"limitCategory"},Z={class:"input-field"},ee=["disabled"],te=G(()=>t("i",{class:"material-icons right"},"send",-1));function se(e,a,u,s,n,r){return c(),h("div",H,[t("form",{onSubmit:a[4]||(a[4]=$((...o)=>e.onSubmit&&e.onSubmit(...o),["prevent"]))},[t("div",J,[t("div",Q,[E(t("input",{id:"nameCategory",type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>e.nValue=o),class:y({invalid:e.nError}),onBlur:a[1]||(a[1]=(...o)=>e.nBlur&&e.nBlur(...o))},null,34),[[L,e.nValue]]),t("label",W,i(e.getLocalizedText("NameRecord")),1),t("span",{class:y(["helper-text",{invalid:e.nError}])},i(e.nError),3)]),t("div",X,[E(t("input",{id:"limitCategory",type:"number","onUpdate:modelValue":a[2]||(a[2]=o=>e.lValue=o),class:y({invalid:e.lError}),onBlur:a[3]||(a[3]=(...o)=>e.lBlur&&e.lBlur(...o))},null,34),[[L,e.lValue]]),t("label",Y,i(e.getLocalizedText("limit")),1),t("span",{class:y(["helper-text",{invalid:e.lError}])},i(e.lError),3)]),t("div",Z,[t("button",{class:"btn waves-effect waves-light",type:"submit",disabled:e.isSubmitting},[v(i(e.getLocalizedText("Create"))+" ",1),te],8,ee)])])],32)])}const ae=V(A,[["render",se],["__scopeId","data-v-25e68337"]]),oe={name:"CategoriesView",setup(){const e=g(0),a="categories",u=g(),s=g(),n=B(),r=g([]),o=g([]);async function d(){let l=await n.getters["categories/list"];l.length||(l=await n.dispatch("categories/list")),l.length&&(r.value=l.filter(m=>m.isDetected===!1),o.value=l.filter(m=>m.isDetected===!0))}const p=async()=>{await d(),e.value++};return M(async()=>{await d(),s.value=N.Collapsible.init(u.value)}),F(()=>{s.value&&s.value.destroy&&s.value.destroy()}),{updateCategories:p,updateKey:K(()=>e.value),getLocalizedText:_,updateCount:e,dispash:a,collapsibleRef:u,categoryEdit:r,categoryRestore:o}},components:{CategoryCreate:ae,ElementEdit:x,ElementRestor:O}},ie={class:"page-title"},le={class:"collapsible",ref:"collapsibleRef"},ne={class:"collapsible-header"},re=t("i",{class:"material-icons"},"category",-1),de={class:"collapsible-body"},ce={class:"collapsible-header"},ue=t("i",{class:"material-icons"},"edit",-1),pe={class:"collapsible-body"},me={key:0},ge={class:"collapsible-header"},_e=t("i",{class:"material-icons"},"refresh",-1),ye={class:"collapsible-body"},he={key:0};function ve(e,a,u,s,n,r){const o=C("CategoryCreate"),d=C("ElementEdit"),p=C("ElementRestor");return c(),h("div",null,[t("div",ie,[t("h3",null,i(s.getLocalizedText("categories")),1)]),t("section",null,[t("ul",le,[t("li",null,[t("div",ne,[re,v(i(s.getLocalizedText("CreateCategory")),1)]),t("div",de,[j(o,{onCreated:s.updateCategories},null,8,["onCreated"])])]),t("li",null,[t("div",ce,[ue,v(i(s.getLocalizedText("Edit")),1)]),t("div",pe,[s.categoryEdit.length?T("",!0):(c(),h("p",me,i(s.getLocalizedText("NoElementsToEdit")),1)),(c(),I(d,{key:s.updateKey,onUpdated:s.updateCategories,dispash:s.dispash},null,8,["onUpdated","dispash"]))])]),t("li",null,[t("div",ge,[_e,v(i(s.getLocalizedText("Restore")),1)]),t("div",ye,[s.categoryRestore.length?T("",!0):(c(),h("p",he,i(s.getLocalizedText("NoElementsToRestor")),1)),(c(),I(p,{key:s.updateKey+s.updateCount,onUpdated:s.updateCategories,dispash:s.dispash},null,8,["onUpdated","dispash"]))])])],512)])])}const Le=V(oe,[["render",ve]]);export{Le as default};
