import{_ as P,u as B,b as d,f as U,N as E,E as F,V as Q,g as v,o as n,c as r,a as t,O as z,P as q,F as D,r as G,t as s,v as p,q as V,U as x,n as k,j as f,e as O,A as W,i as y,s as A,k as X}from"./index-01b018bd.js";import{u as j,a as K,b as Y,c as Z}from"./index.esm-164d3f5b.js";import{a as $,E as ee}from"./ElementRestor-20529f68.js";import{L as te}from"./LoginPasswordForm-dfb2f6be.js";const oe={name:"ProfileInfo",props:["infoProfile"],setup(o){const a=B(),l=d(),e=d(),u=d(o.infoProfile.locale),{isSubmitting:h,handleSubmit:i}=j({}),c=i(async()=>{const m={name:o.infoProfile.name,role:o.infoProfile.role,locale:u.value};await a.dispatch("requests/updateInfo",m)});return U(()=>{E.updateTextFields(),l.value=E.FormSelect.init(e.value)}),F(()=>{l.value&&l.value.destroy&&l.value.destroy()}),{isSubmitting:h,onSubmit:c,selectCategory:e,localeFlag:Q,locale:u,getLocalizedText:v}}},ie={class:"col s12 m12"},ae={class:"card-content"},se={class:"input-field",id:"locale"},ne=["value"],le=["disabled"],de=t("i",{class:"material-icons right"},"send",-1);function re(o,a,l,e,u,h){return n(),r("div",ie,[t("form",{onSubmit:a[1]||(a[1]=V((...i)=>e.onSubmit&&e.onSubmit(...i),["prevent"]))},[t("div",ae,[t("div",se,[z(t("select",{ref:"selectCategory","onUpdate:modelValue":a[0]||(a[0]=i=>e.locale=i)},[(n(!0),r(D,null,G(e.localeFlag,i=>(n(),r("option",{key:i.flag,value:i.flag},s(i.value),9,ne))),128))],512),[[q,e.locale]]),t("label",null,s(e.getLocalizedText("localeSite")),1)]),t("button",{class:"btn waves-effect waves-light",type:"submit",disabled:e.isSubmitting},[p(s(e.getLocalizedText("refresh"))+" ",1),de],8,le)])],32)])}const ce=P(oe,[["render",re]]);function ue(o,{emit:a}){const{isSubmitting:e,handleSubmit:u}=j(),h=B(),i=d(),c=d(),m=d(),{value:C,errorMessage:_,handleBlur:T}=K("nameCard",Y().trim().required(v("EnterCategoryName"))),{value:g,errorMessage:b,handleBlur:w}=K("limitCard",Z().required(v("EnterLimit")).min(5e3,`${v("LimitCannotBeLess")} 5000.`));g.value=5e3;const S=u(async(M,{resetForm:I})=>{try{await h.dispatch("card/create",{title:M.nameCard,limit:M.limitCard,bill:M.limitCard,isDetected:!1,type:m.value}),I(),g.value=5e3,a("created")}catch{}});return U(()=>{E.updateTextFields(),c.value=E.FormSelect.init(i.value)}),F(()=>{c.value&&c.value.destroy&&c.value.destroy()}),{isSubmitting:e,nValue:C,nError:_,nBlur:T,lValue:g,lError:b,lBlur:w,onSubmit:S,selectCard:i,current:m,getLocalizedText:v}}const he={name:"CardCreate",emits:["created"],setup(o,{emit:a}){return{...ue(o,{emit:a})}}},me={class:"col s12 m12"},_e={class:"input-field"},ge={value:"",disabled:"",selected:""},pe={value:"debit"},fe={value:"credit"},ve={value:"cash"},be={class:"input-field"},Le={for:"nameCard"},ye={class:"input-field"},Ce={for:"limitCard"},Te={class:"input-field"},Me=["disabled"],Ae=t("i",{class:"material-icons right"},"send",-1);function Ee(o,a,l,e,u,h){return n(),r("div",me,[t("form",{onSubmit:a[5]||(a[5]=V((...i)=>o.onSubmit&&o.onSubmit(...i),["prevent"]))},[t("div",_e,[z(t("select",{ref:"selectCard","onUpdate:modelValue":a[0]||(a[0]=i=>o.current=i),required:""},[t("option",ge,s(o.getLocalizedText("ChooseCardType")),1),t("option",pe,s(o.getLocalizedText("Debits")),1),t("option",fe,s(o.getLocalizedText("Credits")),1),t("option",ve,s(o.getLocalizedText("Ð¡ash")),1)],512),[[q,o.current]])]),t("div",be,[z(t("input",{id:"nameCard",type:"text","onUpdate:modelValue":a[1]||(a[1]=i=>o.nValue=i),class:k({invalid:o.nError}),onBlur:a[2]||(a[2]=(...i)=>o.nBlur&&o.nBlur(...i))},null,34),[[x,o.nValue]]),t("label",Le,s(o.getLocalizedText("NameRecord")),1),t("span",{class:k(["helper-text",{invalid:o.nError}])},s(o.nError),3)]),t("div",ye,[z(t("input",{id:"limitCard",type:"number","onUpdate:modelValue":a[3]||(a[3]=i=>o.lValue=i),class:k({invalid:o.lError}),onBlur:a[4]||(a[4]=(...i)=>o.lBlur&&o.lBlur(...i))},null,34),[[x,o.lValue]]),t("label",Ce,s(o.getLocalizedText("limit")),1),t("span",{class:k(["helper-text",{invalid:o.lError}])},s(o.lError),3)]),t("div",Te,[t("button",{class:"btn waves-effect waves-light",type:"submit",disabled:o.isSubmitting},[p(s(o.getLocalizedText("Create"))+" ",1),Ae],8,Me)])],32)])}const we=P(he,[["render",Ee]]),Se={name:"ActiveMethodAuth",props:["loginMetod"],emits:["updated"],setup(o,{emit:a}){const l=B(),e=async h=>{await l.dispatch("auth/unMethodAuth",h),a("updated")},u={"google.com":"Google",password:v("LoginPass")};return{unlinkAuth:e,authTitle:u,getLocalizedText:v}}},Ie={class:"striped highlight centered teal lighten-4",ref:"cardTableRef"},ke={key:0},ze={key:0},Pe={key:0},Be=["onClick"],Ve=t("i",{class:"material-icons"},"open_in_new",-1),Ne=[Ve];function Ue(o,a,l,e,u,h){return n(),r("table",Ie,[l.loginMetod?(n(),r("thead",ke,[t("tr",null,[t("th",null,s(e.getLocalizedText("Type")),1),t("th",null,s(e.getLocalizedText("Account")),1),l.loginMetod.length>1?(n(),r("th",ze,s(e.getLocalizedText("TurnOff")),1)):f("",!0)])])):f("",!0),t("tbody",null,[(n(!0),r(D,null,G(l.loginMetod,i=>(n(),r("tr",{key:i.providerId},[t("td",null,s(e.authTitle[i.providerId]),1),t("td",null,s(i.email),1),l.loginMetod.length>1?(n(),r("td",Pe,[t("a",{href:"#",class:"btn-small btn",onClick:V(c=>e.unlinkAuth(i.providerId),["prevent"])},Ne,8,Be)])):f("",!0)]))),128))])],512)}const Fe=P(Se,[["render",Ue]]),Re={name:"ProfileView",setup(){const o=B(),a=o.getters["requests/clientInfo"],l=d(0),e="card",u="auth/addLoginPass",h="addLoginPass",i="AddLoginPassword",c=d(),m=d(),C=d(),_=d(),T=d(0),g=d(),b=d(!0),w=d([]),S=d([]);async function M(){c.value=await o.dispatch("auth/verificationMethods"),m.value=c.value.find(L=>L.providerId==="password"),g.value=c.value.find(L=>L.providerId==="google.com")}async function I(){const L=await o.getters["card/list"];L.length&&(S.value=L.filter(N=>N.isDetected===!1),w.value=L.filter(N=>N.isDetected===!0))}const R=async()=>{await I(),l.value++},H=async()=>{await M(),T.value++};U(async()=>{b.value=!0,await M(),await I(),setTimeout(()=>{_.value=E.Collapsible.init(C.value)},0),b.value=!1}),F(()=>{_.value&&_.value.destroy&&_.value.destroy()});const J=async()=>{await o.dispatch("auth/googleAddAuth")};return{getLocalizedText:v,infoProfile:a,update:R,updateKey:O(()=>l.value),updateKeyAuth:O(()=>T.value),updateCount:l,dispatchOnSubmitElement:e,dispatchOnSubmitLogin:u,ButtonLogin:h,titleLogin:i,passwordMetod:m,loginMetod:c,collapsibleRef:C,updateAuth:H,googleAuth:J,googleMethod:g,cardListEdit:S,loading:b,cardListRestore:w}},components:{ProfileInfo:ce,CardCreate:we,ElementRestor:$,ElementEdit:ee,LoginPasswordForm:te,ActiveMethodAuth:Fe,AppLoading:W}},xe={class:"page-title"},Oe={key:1},Ke={class:"collapsible",ref:"collapsibleRef"},qe={class:"collapsible-header"},De=t("i",{class:"material-icons"},"account_circle",-1),Ge={class:"collapsible-body"},je={class:"collapsible-header"},He=t("i",{class:"material-icons"},"login",-1),Je={class:"collapsible-body"},Qe={key:0},We={class:"collapsible-header"},Xe=t("i",{class:"material-icons"},"rule_folder",-1),Ye={class:"collapsible-body"},Ze={class:"btn"},$e={class:"collapsible-header"},et=t("i",{class:"material-icons"},"credit_card",-1),tt={class:"collapsible-body"},ot={class:"collapsible-header"},it=t("i",{class:"material-icons"},"redeem",-1),at={class:"collapsible-body"},st={key:0},nt={class:"collapsible-header"},lt=t("i",{class:"material-icons"},"credit_score",-1),dt={class:"collapsible-body"},rt={key:0};function ct(o,a,l,e,u,h){const i=y("AppLoading"),c=y("ProfileInfo"),m=y("ActiveMethodAuth"),C=y("LoginPasswordForm"),_=y("CardCreate"),T=y("ElementEdit"),g=y("ElementRestor");return n(),r("div",null,[t("div",xe,[t("h3",null,s(e.getLocalizedText("profile-title")),1)]),e.loading?(n(),A(i,{key:0})):(n(),r("section",Oe,[t("ul",Ke,[t("li",null,[t("div",qe,[De,p(s(e.getLocalizedText("profile-title")),1)]),t("div",Ge,[X(c,{infoProfile:e.infoProfile},null,8,["infoProfile"])])]),t("li",null,[t("div",je,[He,p(s(e.getLocalizedText("ActivatedAuthorizationMethods")),1)]),t("div",Je,[(n(),A(m,{key:e.updateKeyAuth,loginMetod:e.loginMetod,onUpdated:e.updateAuth},null,8,["loginMetod","onUpdated"]))])]),!e.passwordMetod||!e.googleMethod?(n(),r("li",Qe,[t("div",We,[Xe,p(s(e.getLocalizedText("AddendumMethod")),1)]),t("div",Ye,[e.passwordMetod?f("",!0):(n(),A(C,{key:e.updateKeyAuth,onUpdated:e.updateAuth,dispatchOnSubmitLogin:e.dispatchOnSubmitLogin,ButtonLogin:e.ButtonLogin,titleLogin:e.titleLogin},null,8,["onUpdated","dispatchOnSubmitLogin","ButtonLogin","titleLogin"])),e.googleMethod?f("",!0):(n(),r("form",{key:1,action:"",onClick:a[0]||(a[0]=V((...b)=>e.googleAuth&&e.googleAuth(...b),["prevent"]))},[t("button",Ze,s(e.getLocalizedText("AddGoogle")),1)]))])])):f("",!0),t("li",null,[t("div",$e,[et,p(s(e.getLocalizedText("CreateCard")),1)]),t("div",tt,[(n(),A(_,{key:e.updateKey,onCreated:e.update},null,8,["onCreated"]))])]),t("li",null,[t("div",ot,[it,p(s(e.getLocalizedText("EditCard")),1)]),t("div",at,[e.cardListEdit.length?f("",!0):(n(),r("p",st,s(e.getLocalizedText("NoElementsToEdit")),1)),(n(),A(T,{key:e.updateKey,onUpdated:e.update,dispash:e.dispatchOnSubmitElement},null,8,["onUpdated","dispash"]))])]),t("li",null,[t("div",nt,[lt,p(s(e.getLocalizedText("RestoreCard")),1)]),t("div",dt,[e.cardListRestore.length?f("",!0):(n(),r("p",rt,s(e.getLocalizedText("NoElementsToRestor")),1)),(n(),A(g,{key:e.updateKey,dispash:e.dispatchOnSubmitElement,onUpdated:e.update},null,8,["dispash","onUpdated"]))])])],512)]))])}const gt=P(Re,[["render",ct]]);export{gt as default};
