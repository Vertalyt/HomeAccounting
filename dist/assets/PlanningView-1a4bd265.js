import{b as o,u as q,f as E,M as j,E as I,N as V,_ as F,h as Q,i as y,o as n,c as i,r as A,k,l as T,a as s,t,v as c,n as G,Q as H,F as B,g as J,A as K,s as z,j as b,O as W,P as X,q as Z}from"./index-0a08cbe1.js";import{f as $}from"./currency.filter-780ad7d5.js";import{s as x,f as ee,u as te,S as ae}from"./SelectPlanningMonth-bdda7c97.js";import{b as S}from"./ballanseOfType-1c897441.js";function oe(){const e=o(!0),d=o([]),f=q(),a=o([]),P=o(),C=o(),u=o(),l=o(),p=o(),m=o([]),_=o([]),r=o([]),L=o(!1),M=o([]),Y=o(new Date().getFullYear()),w=o(),g=o();function N(){const h=_.value.find(v=>v.year===Y.value);h&&(r.value=h.month.sort((v,U)=>v-U),M.value={month:r.value[r.value.length-1]||new Date().getMonth()}.month)}async function D(h){a.value=await ee(Y.value,M.value.month||M.value),d.value=te(h,a)}E(async()=>{e.value=!0,g.value=await f.getters["card/list"],g.value=g.value.filter(v=>v.isDetected===!1),g.value.length&&(C.value=S(g.value,"credit"),u.value=S(g.value,"debit"),l.value=S(g.value,"cash"),P.value=Number(C.value)+Number(u.value)+Number(l.value)),_.value=await x(),N();let h=await f.getters["categories/list"];h.length||(h=await f.dispatch("categories/list")),m.value=h.filter(v=>v.isDetected===!1),await D(m),j(()=>{setTimeout(()=>{V.updateTextFields(),w.value=V.FormSelect.init(p.value)},0)}),e.value=!1});const R=async()=>{L.value=!0,setTimeout(async()=>{await D(m)},0),L.value=!1},O=async()=>{L.value=!0,N(),await D(m),L.value=!1};return I(()=>{w.value&&w.value.destroy&&w.value.destroy()}),{Loading:e,categories:d,bill:P,formatCurrency:$,records:a,credit:C,debit:u,cash:l,yearSelectRef:p,selectedMonth:M,selectedYear:Y,onMonthChange:R,transformedYears:_,onYearChange:O,transformedMonths:r,loadingDate:L,billCards:g,allCategories:m}}const ne={name:"PlanningProgress",props:["categories"],setup(){return{}},components:{Popper:Q}},se={class:"progress"};function re(e,d,f,a,P,C){const u=y("Popper");return n(!0),i(B,null,A(f.categories,l=>(n(),i("div",{key:l.idParrent},[k(u,{hover:!0,content:l.tooltip,style:{width:"100%"}},{default:T(()=>[s("div",null,[s("p",null,[s("strong",null,t(l.title)+":",1),c(" "+t(l.spend)+" / "+t(l.limit),1)]),s("div",se,[s("div",{class:G(["determinate",l.progressColor]),style:H({width:l.progressPercent})},null,6)])])]),_:2},1032,["content"])]))),128)}const le=F(ne,[["render",re]]),ie={name:"PlanningView",setup(){return{...oe(),getLocalizedText:J}},components:{AppLoading:K,PlanningProgress:le,SelectPlanningMonth:ae}},de={key:1},ce={key:2},ue={key:3},ge={key:4},he={key:5},me={class:"page-title"},ve={key:0},fe={key:1},pe={key:2},ye={class:"row"},Ce={class:"input-field col s6"},_e={value:"",disabled:"",selected:""},Le=["value"];function ke(e,d,f,a,P,C){const u=y("AppLoading"),l=y("routerLink"),p=y("router-link"),m=y("SelectPlanningMonth"),_=y("PlanningProgress");return e.Loading?(n(),z(u,{key:0})):e.billCards.length?e.records.length?e.allCategories.length?e.categories.length?(n(),i("div",he,[s("div",me,[s("div",null,[s("h3",null,t(a.getLocalizedText("menuPlanning")),1)]),s("div",null,[s("h5",null,t(a.getLocalizedText("Total"))+": "+t(e.formatCurrency(e.bill)),1),e.debit!==0?(n(),i("h6",ve,t(a.getLocalizedText("Debits"))+": "+t(e.formatCurrency(e.debit)),1)):b("",!0),e.credit!==0?(n(),i("h6",fe,t(a.getLocalizedText("Credits"))+": "+t(e.formatCurrency(e.credit)),1)):b("",!0),e.cash!==0?(n(),i("h6",pe,t(a.getLocalizedText("Ð¡ash"))+": "+t(e.formatCurrency(e.cash)),1)):b("",!0)])]),s("div",ye,[s("div",Ce,[W(s("select",{ref:"yearSelectRef","onUpdate:modelValue":d[0]||(d[0]=r=>e.selectedYear=r),required:"",onChange:d[1]||(d[1]=Z((...r)=>e.onYearChange&&e.onYearChange(...r),["prevent"]))},[s("option",_e,t(a.getLocalizedText("SelectAYear")),1),(n(!0),i(B,null,A(e.transformedYears,r=>(n(),i("option",{value:r.year,key:r.year},t(r.year),9,Le))),128))],544),[[X,e.selectedYear]])]),(n(),z(m,{key:e.selectedYear,modelValue:e.selectedMonth,"onUpdate:modelValue":d[2]||(d[2]=r=>e.selectedMonth=r),onOnChange:e.onMonthChange,transformedDataMonth:e.transformedMonths},null,8,["modelValue","onOnChange","transformedDataMonth"]))]),s("section",null,[e.loadingDate?(n(),z(u,{key:0})):b("",!0),(n(),z(_,{categories:e.categories,key:e.categories.length+e.selectedYear},null,8,["categories"]))])])):(n(),i("p",ge,[c(t(a.getLocalizedText("SpendingTransactionsYet"))+" ",1),k(p,{to:"/record"},{default:T(()=>[c(t(a.getLocalizedText("add")),1)]),_:1})])):(n(),i("p",ue,[c(t(a.getLocalizedText("categoriesNotFound"))+" ",1),k(p,{to:"/categories"},{default:T(()=>[c(t(a.getLocalizedText("add")),1)]),_:1})])):(n(),i("p",ce,[c(t(a.getLocalizedText("recordsNotFound"))+" ",1),k(p,{to:"/record"},{default:T(()=>[c(t(a.getLocalizedText("add")),1)]),_:1})])):(n(),i("p",de,[c(t(a.getLocalizedText("CardNotFound")),1),k(l,{to:"/profile"},{default:T(()=>[c(t(a.getLocalizedText("AddPepper")),1)]),_:1})]))}const ze=F(ie,[["render",ke]]);export{ze as default};
