import{f as u}from"./currency.filter-780ad7d5.js";import{R as h,_ as p,b as d,f as y,N as f,E as M,g as o,w as g,o as c,c as m,O as v,P as w,a as D,F as S,r as _,t as b,q as R}from"./index-7e1ad37d.js";function A(l,a){return l.value.map(n=>{const t=a.value.filter(e=>e.idParrent===n.idParrent).filter(e=>e.type==="outcome").reduce((e,s)=>e+=Number(s.amount),0);if(t!==0){const e=t*100/n.limit,s=`${e>100?100:e}%`,r=e<60?"green":e<100?"yellow":"red",i=`${u(n.limit)} - ${u(t)} = ${u(n.limit-t)}`;return{...n,progressPercent:s,progressColor:r,spend:t,tooltip:i}}return null}).filter(n=>n!==null)}async function B(){let a=(await h.dispatch("records/serviseDateRecords")).map(t=>{const e=new Date(t.day),s=e.getFullYear(),r=e.getMonth();return{year:s,month:r}});const n=new Set;return a.forEach(t=>{const e=t.year;n.has(e)||n.add(e)}),a.reduce((t,{year:e,month:s})=>{const r=t.find(i=>i.year===e);return r?r.month.push(s.toString()):t.push({year:e,month:[s.toString()]}),t},[])}async function E(l,a){let n=await h.dispatch("records/listRecords",{yearModel:l,monthModel:a});return n.length&&n.sort((t,e)=>new Date(t.date)-new Date(e.date)),n}const C={name:"SelectPlanningMonth",props:["modelValue","transformedDataMonth"],emits:["onChange","update:modelValue"],setup(l,{emit:a}){const n=d(l.modelValue),t=d(),e=d();y(()=>{f.updateTextFields(),e.value=f.FormSelect.init(t.value)}),M(()=>{e.value&&e.value.destroy&&e.value.destroy()});const s=[{name:o("January")},{name:o("February")},{name:o("March")},{name:o("April")},{name:o("May")},{name:o("June")},{name:o("July")},{name:o("August")},{name:o("September")},{name:o("October")},{name:o("November")},{name:o("December")}];return g(n,r=>{a("update:modelValue",{month:r})}),{nameMounth:s,month:n,refMonth:t,getLocalizedText:o}}},F={class:"input-field col s6"},P=["value"];function V(l,a,n,t,e,s){return c(),m("div",F,[v(D("select",{ref:"refMonth","onUpdate:modelValue":a[0]||(a[0]=r=>t.month=r),required:"",onChange:a[1]||(a[1]=R(r=>l.$emit("onChange"),["prevent"]))},[(c(!0),m(S,null,_(n.transformedDataMonth,r=>(c(),m("option",{value:r,key:r},b(t.nameMounth[r].name),9,P))),128))],544),[[w,t.month]])])}const N=p(C,[["render",V]]);export{N as S,E as f,B as s,A as u};
