import{u as N,a as h,b as w,c as U}from"./index.esm-d4de9650.js";import{u as k,g as n,f as I,N as B,_ as M,o as c,c as L,a as t,O as f,U as b,n as d,t as l,y as u,q as z,p as R,m as q,b as v,E as D,e as F,i as y,k as K,s as E}from"./index-7e1ad37d.js";import{E as O,a as j}from"./ElementRestor-23b0f287.js";function A(e,{emit:s}){const{isSubmitting:a,handleSubmit:i}=N(),p=k(),{value:o,errorMessage:m,handleBlur:_}=h("nameCategory",w().trim().required(n("EnterCategoryName"))),{value:g,errorMessage:V,handleBlur:$}=h("limitCategory",U().required(n("EnterLimit")).min(500,`${n("LimitCannotBeLess")} 500.`));g.value=500;const T=i(async(C,{resetForm:S})=>{try{await p.dispatch("categories/create",{title:C.nameCategory,limit:C.limitCategory,isDetected:!1}),S(),g.value=500,s("created")}catch{}});return I(()=>{B.updateTextFields()}),{isSubmitting:a,nValue:o,nError:m,nBlur:_,lValue:g,lError:V,lBlur:$,onSubmit:T,getLocalizedText:n}}const G={name:"CategoryCreate",emits:["created"],setup(e,{emit:s}){return{...A(e,{emit:s})}}},H=e=>(R("data-v-25e68337"),e=e(),q(),e),J={class:"col s12 m12"},P={class:"field"},Q={class:"input-field"},W={for:"nameCategory"},X={class:"input-field"},Y={for:"limitCategory"},Z={class:"input-field"},x=["disabled"],ee=H(()=>t("i",{class:"material-icons right"},"send",-1));function te(e,s,r,a,i,p){return c(),L("div",J,[t("form",{onSubmit:s[4]||(s[4]=z((...o)=>e.onSubmit&&e.onSubmit(...o),["prevent"]))},[t("div",P,[t("div",Q,[f(t("input",{id:"nameCategory",type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>e.nValue=o),class:d({invalid:e.nError}),onBlur:s[1]||(s[1]=(...o)=>e.nBlur&&e.nBlur(...o))},null,34),[[b,e.nValue]]),t("label",W,l(e.getLocalizedText("NameRecord")),1),t("span",{class:d(["helper-text",{invalid:e.nError}])},l(e.nError),3)]),t("div",X,[f(t("input",{id:"limitCategory",type:"number","onUpdate:modelValue":s[2]||(s[2]=o=>e.lValue=o),class:d({invalid:e.lError}),onBlur:s[3]||(s[3]=(...o)=>e.lBlur&&e.lBlur(...o))},null,34),[[b,e.lValue]]),t("label",Y,l(e.getLocalizedText("limit")),1),t("span",{class:d(["helper-text",{invalid:e.lError}])},l(e.lError),3)]),t("div",Z,[t("button",{class:"btn waves-effect waves-light",type:"submit",disabled:e.isSubmitting},[u(l(e.getLocalizedText("Create"))+" ",1),ee],8,x)])])],32)])}const se=M(G,[["render",te],["__scopeId","data-v-25e68337"]]);const ae={name:"CategoriesView",setup(){const e=v(0),s="categories",r=()=>{e.value++},a=v(),i=v();return I(async()=>{i.value=B.Collapsible.init(a.value)}),D(()=>{i.value&&i.value.destroy&&i.value.destroy()}),{updateCategories:r,updateKey:F(()=>e.value),getLocalizedText:n,updateCount:e,dispash:s,collapsibleRef:a}},components:{CategoryCreate:se,ElementEdit:O,ElementRestor:j}},oe={class:"page-title"},ie={class:"collapsible",ref:"collapsibleRef"},le={class:"active"},ne=t("div",{class:"collapsible-header"},[t("i",{class:"material-icons"},"category"),u("Создать категорию")],-1),re={class:"collapsible-body"},de=t("div",{class:"collapsible-header"},[t("i",{class:"material-icons"},"edit"),u("Редактировать категорию")],-1),ce={class:"collapsible-body"},ue=t("div",{class:"collapsible-header"},[t("i",{class:"material-icons"},"refresh"),u("Восстановить категорию")],-1),pe={class:"collapsible-body"};function me(e,s,r,a,i,p){const o=y("CategoryCreate"),m=y("ElementEdit"),_=y("ElementRestor");return c(),L("div",null,[t("div",oe,[t("h3",null,l(a.getLocalizedText("categories")),1)]),t("section",null,[t("ul",ie,[t("li",le,[ne,t("div",re,[K(o,{onCreated:a.updateCategories},null,8,["onCreated"])])]),t("li",null,[de,t("div",ce,[(c(),E(m,{key:a.updateKey,onUpdated:a.updateCategories,dispash:a.dispash},null,8,["onUpdated","dispash"]))])]),t("li",null,[ue,t("div",pe,[(c(),E(_,{key:a.updateKey+a.updateCount,onUpdated:a.updateCategories,dispash:a.dispash},null,8,["onUpdated","dispash"]))])])],512)])])}const Ce=M(ae,[["render",me]]);export{Ce as default};
