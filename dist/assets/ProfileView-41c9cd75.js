import{_ as S,u as I,b as r,f as A,N as P,E as k,V as j,g as y,o as d,c as p,a as e,O as E,U as w,n as L,t as n,P as z,F,r as O,y as _,q as N,e as U,i as g,k as x,s as M,j as $}from"./index-7e1ad37d.js";import{u as q,a as V,b as K,c as G}from"./index.esm-d4de9650.js";import{a as H,E as J}from"./ElementRestor-23b0f287.js";import{L as Q}from"./LoginPasswordForm-d96337d5.js";const W={name:"ProfileInfo",props:["infoProfile"],setup(o){const i=I(),a=r(),t=r(),c=r(o.infoProfile.locale),{isSubmitting:u,handleSubmit:l}=q({initialValues:{nameProfile:o.infoProfile.name}}),{value:s,errorMessage:m,handleBlur:f}=V("nameProfile",K().trim().required("Введите имя")),h=l(async v=>{const b={bill:Number(o.infoProfile.bill),debit:Number(o.infoProfile.debit),credit:Number(o.infoProfile.credit),name:v.name,role:o.infoProfile.role,locale:c.value};await i.dispatch("requests/updateInfo",b)});return A(()=>{P.updateTextFields(),a.value=P.FormSelect.init(t.value)}),k(()=>{a.value&&a.value.destroy&&a.value.destroy()}),{nValue:s,nError:m,nBlur:f,isSubmitting:u,onSubmit:h,selectCategory:t,localeFlag:j,locale:c,getLocalizedText:y}}},X={class:"col s12 m12"},Y={class:"card-content"},Z={class:"input-field"},ee={for:"nameProfile"},te={class:"input-field",id:"locale"},oe=["value"],le=["disabled"],ie=e("i",{class:"material-icons right"},"send",-1);function ne(o,i,a,t,c,u){return d(),p("div",X,[e("form",{onSubmit:i[3]||(i[3]=N((...l)=>t.onSubmit&&t.onSubmit(...l),["prevent"]))},[e("div",Y,[e("div",Z,[E(e("input",{id:"nameProfile",type:"text","onUpdate:modelValue":i[0]||(i[0]=l=>t.nValue=l),class:L({invalid:t.nError}),onBlur:i[1]||(i[1]=(...l)=>t.nBlur&&t.nBlur(...l))},null,34),[[w,t.nValue]]),e("label",ee,n(t.getLocalizedText("name")),1),e("span",{class:L(["helper-text",{invalid:t.nError}])},n(t.nError),3)]),e("div",te,[E(e("select",{ref:"selectCategory","onUpdate:modelValue":i[2]||(i[2]=l=>t.locale=l)},[(d(!0),p(F,null,O(t.localeFlag,l=>(d(),p("option",{key:l.flag,value:l.flag},n(l.value),9,oe))),128))],512),[[z,t.locale]]),e("label",null,n(t.getLocalizedText("localeSite")),1)]),e("button",{class:"btn waves-effect waves-light",type:"submit",disabled:t.isSubmitting},[_(n(t.getLocalizedText("refresh"))+" ",1),ie],8,le)])],32)])}const ae=S(W,[["render",ne]]);function se(o,{emit:i}){const{isSubmitting:t,handleSubmit:c}=q(),u=I(),l=r(),s=r(),m=r(),{value:f,errorMessage:h,handleBlur:v}=V("nameCard",K().trim().required(y("EnterCategoryName"))),{value:b,errorMessage:T,handleBlur:C}=V("limitCard",G().required(y("EnterLimit")).min(5e3,`${y("LimitCannotBeLess")} 5000.`));b.value=5e3;const R=c(async(B,{resetForm:D})=>{try{await u.dispatch("card/create",{title:B.nameCard,limit:B.limitCard,bill:B.limitCard,isDetected:!1,type:m.value}),D(),b.value=5e3,i("created")}catch{}});return A(()=>{P.updateTextFields(),s.value=P.FormSelect.init(l.value)}),k(()=>{s.value&&s.value.destroy&&s.value.destroy()}),{isSubmitting:t,nValue:f,nError:h,nBlur:v,lValue:b,lError:T,lBlur:C,onSubmit:R,selectCard:l,current:m,getLocalizedText:y}}const de={name:"CardCreate",emits:["created"],setup(o,{emit:i}){return{...se(o,{emit:i})}}},re={class:"col s12 m12"},ce={class:"input-field"},ue={value:"",disabled:"",selected:""},me={value:"debit"},he={value:"credit"},pe={value:"cash"},fe={class:"input-field"},ve={for:"nameCard"},_e={class:"input-field"},be={for:"limitCard"},ge={class:"input-field"},ye=["disabled"],Le=e("i",{class:"material-icons right"},"send",-1);function Ce(o,i,a,t,c,u){return d(),p("div",re,[e("form",{onSubmit:i[5]||(i[5]=N((...l)=>o.onSubmit&&o.onSubmit(...l),["prevent"]))},[e("div",ce,[E(e("select",{ref:"selectCard","onUpdate:modelValue":i[0]||(i[0]=l=>o.current=l),required:""},[e("option",ue,n(o.getLocalizedText("ChooseCardType")),1),e("option",me,n(o.getLocalizedText("Debits")),1),e("option",he,n(o.getLocalizedText("Credits")),1),e("option",pe,n(o.getLocalizedText("Сash")),1)],512),[[z,o.current]])]),e("div",fe,[E(e("input",{id:"nameCard",type:"text","onUpdate:modelValue":i[1]||(i[1]=l=>o.nValue=l),class:L({invalid:o.nError}),onBlur:i[2]||(i[2]=(...l)=>o.nBlur&&o.nBlur(...l))},null,34),[[w,o.nValue]]),e("label",ve,n(o.getLocalizedText("NameRecord")),1),e("span",{class:L(["helper-text",{invalid:o.nError}])},n(o.nError),3)]),e("div",_e,[E(e("input",{id:"limitCard",type:"number","onUpdate:modelValue":i[3]||(i[3]=l=>o.lValue=l),class:L({invalid:o.lError}),onBlur:i[4]||(i[4]=(...l)=>o.lBlur&&o.lBlur(...l))},null,34),[[w,o.lValue]]),e("label",be,n(o.getLocalizedText("limit")),1),e("span",{class:L(["helper-text",{invalid:o.lError}])},n(o.lError),3)]),e("div",ge,[e("button",{class:"btn waves-effect waves-light",type:"submit",disabled:o.isSubmitting},[_(n(o.getLocalizedText("Create"))+" ",1),Le],8,ye)])],32)])}const Me=S(de,[["render",Ce]]),Ee={name:"ActiveMethodAuth",props:["loginMetod"],emits:["updated"],setup(o,{emit:i}){const a=I();return{unlinkAuth:async u=>{await a.dispatch("auth/unMethodAuth",u),i("updated")},authTitle:{"google.com":"Google",password:"Логін/пароль"}}}},Pe={class:"striped highlight centered teal lighten-4",ref:"cardTableRef"},Se=e("thead",null,[e("tr",null,[e("th",null," Тип "),e("th",null,"Аккаунт"),e("th",null,"Відключити")])],-1),Ie=["onClick"],Te=e("i",{class:"material-icons"},"open_in_new",-1),Be=[Te];function we(o,i,a,t,c,u){return d(),p("table",Pe,[Se,e("tbody",null,[(d(!0),p(F,null,O(a.loginMetod,l=>(d(),p("tr",{key:l.providerId},[e("td",null,n(t.authTitle[l.providerId]),1),e("td",null,n(l.email),1),e("td",null,[e("a",{href:"#",class:"btn-small btn",onClick:N(s=>t.unlinkAuth(l.providerId),["prevent"])},Be,8,Ie)])]))),128))])],512)}const Ve=S(Ee,[["render",we]]),Ae={name:"ProfileView",setup(){const o=I(),i=o.getters["requests/clientInfo"],a=r(0),t="card",c="auth/addLoginPass",u="addLoginPass",l="AddLoginPassword",s=r(),m=r(),f=r(),h=r(),v=r(0),b=async()=>{a.value++},T=async()=>{s.value=await o.dispatch("auth/verificationMethods"),m.value=s.value.find(C=>C.providerId==="password"),v.value++};return A(async()=>{s.value=await o.dispatch("auth/verificationMethods"),m.value=s.value.find(C=>C.providerId==="password"),h.value=P.Collapsible.init(f.value)}),k(()=>{h.value&&h.value.destroy&&h.value.destroy()}),{getLocalizedText:y,infoProfile:i,update:b,updateKey:U(()=>a.value),updateKeyAuth:U(()=>v.value),updateCount:a,dispatchOnSubmitElement:t,dispatchOnSubmitLogin:c,ButtonLogin:u,titleLogin:l,passwordMetod:m,loginMetod:s,collapsibleRef:f,updateAuth:T}},components:{ProfileInfo:ae,CardCreate:Me,ElementRestor:H,ElementEdit:J,LoginPasswordForm:Q,ActiveMethodAuth:Ve}},ke={class:"page-title"},Ne={class:"collapsible",ref:"collapsibleRef"},Ue=e("div",{class:"collapsible-header"},[e("i",{class:"material-icons"},"account_circle"),_("Профіль")],-1),$e={class:"collapsible-body"},ze=e("div",{class:"collapsible-header"},[e("i",{class:"material-icons"},"login"),_("Активовані методи авторизації")],-1),Fe={class:"collapsible-body"},Oe={key:0},qe=e("div",{class:"collapsible-header"},[e("i",{class:"material-icons"},"alternate_email"),_("Додати вхід по емаіл")],-1),Ke={class:"collapsible-body"},Re=e("div",{class:"collapsible-header"},[e("i",{class:"material-icons"},"credit_card"),_("Створити карту")],-1),De={class:"collapsible-body"},je=e("div",{class:"collapsible-header"},[e("i",{class:"material-icons"},"redeem"),_("Редагувати карту")],-1),xe={class:"collapsible-body"},Ge=e("div",{class:"collapsible-header"},[e("i",{class:"material-icons"},"credit_score"),_("Відновити карту")],-1),He={class:"collapsible-body"};function Je(o,i,a,t,c,u){const l=g("ProfileInfo"),s=g("ActiveMethodAuth"),m=g("LoginPasswordForm"),f=g("CardCreate"),h=g("ElementEdit"),v=g("ElementRestor");return d(),p("div",null,[e("div",ke,[e("h3",null,n(t.getLocalizedText("profile-title")),1)]),e("section",null,[e("ul",Ne,[e("li",null,[Ue,e("div",$e,[x(l,{infoProfile:t.infoProfile},null,8,["infoProfile"])])]),e("li",null,[ze,e("div",Fe,[(d(),M(s,{key:t.updateKeyAuth,loginMetod:t.loginMetod,onUpdated:t.updateAuth},null,8,["loginMetod","onUpdated"]))])]),t.passwordMetod?$("",!0):(d(),p("li",Oe,[qe,e("div",Ke,[t.passwordMetod?$("",!0):(d(),M(m,{key:t.updateKeyAuth,onUpdated:t.updateAuth,dispatchOnSubmitLogin:t.dispatchOnSubmitLogin,ButtonLogin:t.ButtonLogin,titleLogin:t.titleLogin},null,8,["onUpdated","dispatchOnSubmitLogin","ButtonLogin","titleLogin"]))])])),e("li",null,[Re,e("div",De,[(d(),M(f,{key:t.updateKey,onCreated:t.update},null,8,["onCreated"]))])]),e("li",null,[je,e("div",xe,[(d(),M(h,{key:t.updateKey,onUpdated:t.update,dispash:t.dispatchOnSubmitElement},null,8,["onUpdated","dispash"]))])]),e("li",null,[Ge,e("div",He,[(d(),M(v,{key:t.updateKey,dispash:t.dispatchOnSubmitElement,onUpdated:t.update},null,8,["dispash","onUpdated"]))])])],512)])])}const et=S(Ae,[["render",Je]]);export{et as default};
